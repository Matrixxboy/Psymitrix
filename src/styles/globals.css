@tailwind base;
@tailwind components;
@tailwind utilities;

/* base variables + body */
@layer base {
  :root {
    --background: #F4F4F2;
    --primary: #A5645A;
    --secondary: #E5C397;
    --accent: #D87D62;
    --headings: #4B2F2A;
    --body: #4A433F;

    --light-background: #F4F4F2;
    --light-primary: #A5645A;
    --light-secondary: #E5C397;
    --light-accent: #D87D62;
    --light-headings: #4B2F2A;
    --light-body: #4A433F;

    --dark-background: #1C1A1A;
    --dark-primary: #E1A79E;
    --dark-secondary: #F0D2A8;
    --dark-accent: #F1B18F;
    --dark-headings: #F8F1EB;
    --dark-body: #E5DAD2;

    --glass-light-surface: rgba(251,247,242,0.78);
    --glass-light-tint: rgba(229,195,151,0.35);
    --glass-light-base: rgba(248,242,236,0.45);
    --glass-light-border: rgba(229,195,151,0.45);
    --glass-light-shadow: rgba(165,100,90,0.18);

    --glass-dark-surface: rgba(74,48,42,0.72);
    --glass-dark-tint: rgba(118,76,66,0.38);
    --glass-dark-base: rgba(63,42,38,0.48);
    --glass-dark-border: rgba(225,167,158,0.38);
    --glass-dark-shadow: rgba(46,28,24,0.6);

    --glass-gradient: linear-gradient(135deg, var(--glass-light-surface), var(--glass-light-tint));
    --glass-base: var(--glass-light-base);
    --glass-border: var(--glass-light-border);
    --glass-shadow: var(--glass-light-shadow);

    --success: #27AE60;
    --warning: #F2C94C;
    --error: #EB5757;
  }

  .dark {
    --background: #1C1A1A;
    --primary: #E1A79E;
    --secondary: #F0D2A8;
    --accent: #F1B18F;
    --headings: #F8F1EB;
    --body: #E5DAD2;
    --glass-gradient: linear-gradient(135deg, var(--glass-dark-surface), var(--glass-dark-tint));
    --glass-base: var(--glass-dark-base);
    --glass-border: var(--glass-dark-border);
    --glass-shadow: var(--glass-dark-shadow);
  }

  html, body {
    height: 100%;
  }

  body {
    @apply bg-light-background dark:bg-dark-background text-light-body dark:text-dark-body;
  }
}

/* components: glass utilities */
@layer components {
  /* Main reusable glass card */
  .glass {
    background-image: var(--glass-gradient);
    background-color: var(--glass-base);
    border: 1px solid var(--glass-border);
    box-shadow: 0 28px 60px var(--glass-shadow);
    border-radius: 1.5rem;
    -webkit-backdrop-filter: blur(24px) saturate(160%);
    backdrop-filter: blur(24px) saturate(160%);
    overflow: hidden;
    position: relative;
    will-change: transform, backdrop-filter;
    transform: translateZ(0);
    transition: box-shadow 0.4s ease, border-color 0.4s ease, background 0.4s ease;
  }

  .glass::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at top, rgba(255,255,255,0.35), transparent 60%);
    opacity: 0.35;
    pointer-events: none;
  }

  .glass::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(160deg, rgba(255,255,255,0.15) 0%, transparent 45%);
    mix-blend-mode: screen;
    pointer-events: none;
    opacity: 0.25;
    transition: opacity 0.4s ease;
  }

  .glass:hover::after {
    opacity: 0.4;
  }

  .glass:hover {
    box-shadow: 0 36px 72px var(--glass-shadow);
  }

  /* Fullscreen overlay used to blur/darken the whole page */
  .glass-overlay {
    position: fixed;
    inset: 0;
    z-index: 40;
    /* Fallback (always apply a dark tint so blur isn't required) */
    background-color: rgba(0,0,0,0.45);
    will-change: backdrop-filter;
    transform: translateZ(0);
  }

  /* If the browser supports backdrop-filter, use it (and a lighter tint) */
  @supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
    .glass-overlay {
      background-color: rgba(2,6,23,0.32);
      -webkit-backdrop-filter: blur(12px) saturate(120%);
      backdrop-filter: blur(12px) saturate(120%);
    }
  }

  /* Glassy panel that sits on top of the overlay */
  .glass-panel {
    position: absolute;
    left: 0;
    width: 100%;
    top: 4rem; 
    z-index: 50;
    padding: 0.75rem;
    background-color: rgba(255,255,255,0.12);
    border-top: 1px solid rgba(255,255,255,0.06);
    -webkit-backdrop-filter: blur(14px);
    backdrop-filter: blur(14px);
    will-change: backdrop-filter;
    transform: translateZ(0);
  }

  .dark .glass-panel {
    background-color: rgba(18,18,18,0.45);
    border-top: 1px solid rgba(255,255,255,0.03);
  }
}
